{
  "entities": {
    "Quote": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Quote",
      "type": "object",
      "description": "Represents a motivational quote.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the quote."
        },
        "text": {
          "type": "string",
          "description": "The text of the motivational quote."
        },
        "author": {
          "type": "string",
          "description": "The author of the quote."
        }
      },
      "required": [
        "id",
        "text"
      ]
    },
    "MentalHealthCategory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MentalHealthCategory",
      "type": "object",
      "description": "Represents a category of mental health issues (e.g., Depression, Anxiety).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the mental health category."
        },
        "name": {
          "type": "string",
          "description": "The name of the mental health category (e.g., Depression)."
        },
        "description": {
          "type": "string",
          "description": "A short description of the mental health issue."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "UserProgress": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProgress",
      "type": "object",
      "description": "Represents a user's logged progress data.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user progress entry."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N UserProgress)"
        },
        "date": {
          "type": "string",
          "description": "The date the progress was logged.",
          "format": "date-time"
        },
        "mood": {
          "type": "number",
          "description": "User's mood level for the day (e.g., on a scale of 1-10)."
        },
        "stressLevel": {
          "type": "number",
          "description": "User's stress level for the day (e.g., on a scale of 1-10)."
        }
      },
      "required": [
        "id",
        "userId",
        "date"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "favoriteQuoteIds": {
          "type": "array",
          "description": "References to Quotes. (Relationship: User N:N Quote)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "email"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/quotes/{quoteId}",
        "definition": {
          "entityName": "Quote",
          "schema": {
            "$ref": "#/backend/entities/Quote"
          },
          "description": "Stores motivational quotes available to all users."
        }
      },
      {
        "path": "/mental_health_categories/{categoryId}",
        "definition": {
          "entityName": "MentalHealthCategory",
          "schema": {
            "$ref": "#/backend/entities/MentalHealthCategory"
          },
          "description": "Stores mental health categories available to all users."
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Accessible only by the user (request.auth.uid == userId).",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/progress/{progressId}",
        "definition": {
          "entityName": "UserProgress",
          "schema": {
            "$ref": "#/backend/entities/UserProgress"
          },
          "description": "Stores user progress data. Accessible only by the user (request.auth.uid == userId).",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "progressId",
              "description": "The unique identifier of the user progress entry."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support a mental wellness application, \"MindBloom,\" focusing on motivational quotes, mental health categories, AI assistance, and progress tracking. The design emphasizes Authorization Independence, QAPs, and DBAC principles. User-owned data is namespaced under `/users/{userId}` for secure and scalable access.  Progress tracking is also namespaced in the user subcollection.  This promotes clear ownership, simplified security rules, and easy data retrieval. The structure ensures that rules are not filters by segregating data with different access requirements into separate collections. Specifically, user-specific data is stored under the `/users/{userId}` path, enabling simple rules based on `request.auth.uid == userId`. Quotes and MentalHealthCategories are stored in root-level collections because they are globally accessible. Recent Months and when it public it should track progress through `UserProgress` collection."
  }
}